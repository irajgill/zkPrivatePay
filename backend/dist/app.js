import express from 'express';
import cors from 'cors';
import helmet from 'helmet';
import pino from 'pino';
import { cfg } from './config.js';
import proofsRouter from './routes/proofs.js';
import paymentsRouter from './routes/payments.js';
import complianceRouter from './routes/compliance.js';
import clobRouter from './routes/clob.js';
import analyticsRouter from './routes/analytics.js';
const app = express();
const log = pino({ level: 'info' });
app.use(helmet());
app.use(cors());
app.use(express.json({ limit: '2mb' }));
app.use('/api/proofs', proofsRouter);
app.use('/api/payments', paymentsRouter);
app.use('/api/compliance', complianceRouter);
app.use('/api/clob', clobRouter);
app.use('/api/analytics', analyticsRouter);
app.get('/health', (_req, res) => res.json({ ok: true }));
app.listen(cfg.port, () => log.info(`Gateway listening on :${cfg.port}`));
